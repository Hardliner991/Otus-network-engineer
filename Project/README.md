## Проектирование ЦОД с использованием EVPN-VXLAN
### Цель
Создание масштабируемой, отказоустойчивой и гибкой сети в раммках ЦОД, с поддержкой единых L2/L3 доменов.

### 1. Основные компоненты

### A. EVPN (Ethernet VPN)

Control Plane , использующая BGP для обмена маршрутами между коммутаторами (VTEP).
Поддерживает многопоточность , маршрутизацию L2/L3 , интеграцию с VRF и оптимизацию BUM-трафика (Broadcast, Unknown Unicast, Multicast) .

### B. VXLAN (Virtual Extensible LAN)

Туннелирование , позволяющее расширять L2-сети между ЦОДами через IP-инфраструктуру.
Использует VNI (VXLAN Network Identifier) для изоляции трафика между виртуальными сетями.

### C. Spine-Leaf архитектура

ЦОД строится по схеме spine-leaf , где:

Spine — Core коммутаторы, отвечающие за маршрутизацию между leaf-узлами.
Leaf — Border коммутаторы, подключающие серверы и обеспечивающие VXLAN-туннели.

### D. WAN/MPLS
Соединение между ЦОДами через WAN-сеть (например, Dark Fiber, DWDM) или MPLS .
Настройка IPsec-туннелей для безопасности.

### 2. Топология и логическая схема



### 3. Ключевые аспекты проектирования

### A. Мультисайтовое соединение через EVPN Type-5
Type-5 маршруты (IP Prefix routes) используются для маршрутизации между ЦОДами.


### B. Настройка Route Reflectors (RR)
В качестве RR используются Spine коммутаторы.

### C. Route Targets (RT) для изоляции трафика
RT определяют, какие маршруты должны быть импортированы/экспортированы между VRF.

### D. Обработка BUM-трафика
Ingress Replication : Каждый Leaf отправляет копии пакетов всем удаленным VTEP.
PIM (Protocol Independent Multicast) : Используется для оптимизации multicast-трафика.
Optimized BUM (OB) : Современный подход, сочетающий ingress replication и PIM.

### E. Отказоустойчивость
Redundant VTEP : Сервер подключается к двум Leaf-коммутаторам (vPC или MLAG).

### Адресное пространство

| hostname | interface |   IP/MASK   | Description |
| :------: | :-------: | :----------: | :---------: |
|  leaf-1  | Loopback1 | 192.2.0.1 /32 |            |
|  leaf-1  |  eth 1/1  | 192.4.1.7 /31 | to-spine-1 |
|  leaf-1  |  eth 1/2  | 192.4.2.2 /31 | to-spine-2 |
|          |          |              |            |
|  leaf-2  | Loopback1 | 192.2.0.2 /32 |            |
|  leaf-2  |  eth 1/1  | 192.4.1.3 /31 | to-spine-1 |
|  leaf-2  |  eth 1/2  | 192.4.1.4 /31 | to-spine-2 |
|          |          |              |            |
|  leaf-3  | Loopback1 | 192.2.0.3 /32 |            |
|  leaf-3  |  eth 1/1  | 192.4.1.5 /31 | to-spine-1 |
|  leaf-3  |  eth 1/2  | 192.4.1.6 /31 | to-spine-2 |
|          |          |              |            |
| spine-1 | Loopback1 | 192.1.1.0/32 |            |
| spine-1 |  eth 1/1  | 192.4.1.6/31 |  to-leaf-1  |
| spine-1 |  eth 1/2  | 192.4.1.2/31 |  to-leaf-2  |
| spine-1 |  eth 1/3  | 192.4.1.4/31 |  to-leaf-3  |
|          |          |              |            |
| spine-2 | Loopback1 | 192.1.2.0/32 |            |
| spine-2 |  eth 1/1  | 192.4.2.3/31 |  to-leaf-1  |
| spine-2 |  eth 1/2  | 192.4.1.5/31 |  to-leaf-2  |
| spine-2 |  eth 1/3  | 192.4.1.7/31 |  to-leaf-3  |

### Сеть Underlay

### Сеть Overlay 

### Проектирование клиентских подключений

На проектируемой сети будут предоставлены услуги L2VPN, L3VPN
Резервирование обеспечивается на основе ESI LAG т.е. когда клиент одновременно включается в два и более leaf свитчей и 
организует LAG со свой стороны.


## Ход работ
















